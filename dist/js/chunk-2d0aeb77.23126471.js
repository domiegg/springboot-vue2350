(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aeb77"],{"0af6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_edit page_appointment_record",attrs:{id:"appointment_record_edit"}},[t("div",{staticClass:"warp"},[t("div",{staticClass:"container"},[t("div",{staticClass:"row diy_edit_content_box"},[e.$check_field("set","appointment_number")||e.$check_field("add","appointment_number")||e.$check_field("get","appointment_number")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(0),t("div",{staticClass:"diy_field diy_text"},[e.form["appointment_number"]&&e.$check_field("set","appointment_number")||!e.form["appointment_number"]&&e.$check_field("add","appointment_number")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["appointment_number"],expression:"form['appointment_number']"}],attrs:{type:"text",id:"form_appointment_number",placeholder:"请输入预约编号",disabled:!0},domProps:{value:e.form["appointment_number"]},on:{input:function(t){t.target.composing||e.$set(e.form,"appointment_number",t.target.value)}}}):e.$check_field("get","appointment_number")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","vaccine_no")||e.$check_field("add","vaccine_no")||e.$check_field("get","vaccine_no")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(1),t("div",{staticClass:"diy_field diy_text"},[e.form["vaccine_no"]&&e.$check_field("set","vaccine_no")||!e.form["vaccine_no"]&&e.$check_field("add","vaccine_no")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["vaccine_no"],expression:"form['vaccine_no']"}],attrs:{type:"text",id:"form_vaccine_no",placeholder:"请输入疫苗编号",disabled:e.disabledObj["vaccine_no_isDisabled"]},domProps:{value:e.form["vaccine_no"]},on:{input:function(t){t.target.composing||e.$set(e.form,"vaccine_no",t.target.value)}}}):e.$check_field("get","vaccine_no")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","vaccine_name")||e.$check_field("add","vaccine_name")||e.$check_field("get","vaccine_name")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(2),t("div",{staticClass:"diy_field diy_text"},[e.form["vaccine_name"]&&e.$check_field("set","vaccine_name")||!e.form["vaccine_name"]&&e.$check_field("add","vaccine_name")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["vaccine_name"],expression:"form['vaccine_name']"}],attrs:{type:"text",id:"form_vaccine_name",placeholder:"请输入疫苗名称",disabled:e.disabledObj["vaccine_name_isDisabled"]},domProps:{value:e.form["vaccine_name"]},on:{input:function(t){t.target.composing||e.$set(e.form,"vaccine_name",t.target.value)}}}):e.$check_field("get","vaccine_name")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","vaccine_classification")||e.$check_field("add","vaccine_classification")||e.$check_field("get","vaccine_classification")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(3),t("div",{staticClass:"diy_field diy_text"},[e.form["vaccine_classification"]&&e.$check_field("set","vaccine_classification")||!e.form["vaccine_classification"]&&e.$check_field("add","vaccine_classification")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["vaccine_classification"],expression:"form['vaccine_classification']"}],attrs:{type:"text",id:"form_vaccine_classification",placeholder:"请输入疫苗分类",disabled:e.disabledObj["vaccine_classification_isDisabled"]},domProps:{value:e.form["vaccine_classification"]},on:{input:function(t){t.target.composing||e.$set(e.form,"vaccine_classification",t.target.value)}}}):e.$check_field("get","vaccine_classification")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","suitable_for_people")||e.$check_field("add","suitable_for_people")||e.$check_field("get","suitable_for_people")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(4),t("div",{staticClass:"diy_field diy_text"},[e.form["suitable_for_people"]&&e.$check_field("set","suitable_for_people")||!e.form["suitable_for_people"]&&e.$check_field("add","suitable_for_people")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["suitable_for_people"],expression:"form['suitable_for_people']"}],attrs:{type:"text",id:"form_suitable_for_people",placeholder:"请输入适合人群",disabled:e.disabledObj["suitable_for_people_isDisabled"]},domProps:{value:e.form["suitable_for_people"]},on:{input:function(t){t.target.composing||e.$set(e.form,"suitable_for_people",t.target.value)}}}):e.$check_field("get","suitable_for_people")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","bookable_location")||e.$check_field("add","bookable_location")||e.$check_field("get","bookable_location")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(5),t("div",{staticClass:"diy_field diy_text"},[e.form["bookable_location"]&&e.$check_field("set","bookable_location")||!e.form["bookable_location"]&&e.$check_field("add","bookable_location")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["bookable_location"],expression:"form['bookable_location']"}],attrs:{type:"text",id:"form_bookable_location",placeholder:"请输入可预约地点",disabled:e.disabledObj["bookable_location_isDisabled"]},domProps:{value:e.form["bookable_location"]},on:{input:function(t){t.target.composing||e.$set(e.form,"bookable_location",t.target.value)}}}):e.$check_field("get","bookable_location")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","time_of_appointment")||e.$check_field("add","time_of_appointment")||e.$check_field("get","time_of_appointment")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(6),t("div",{staticClass:"diy_field diy_datetime"},[e.form["time_of_appointment"]&&e.$check_field("set","time_of_appointment")||!e.form["time_of_appointment"]&&e.$check_field("add","time_of_appointment")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["time_of_appointment"],expression:"form['time_of_appointment']"}],attrs:{type:"datetime-local",disabled:e.disabledObj["time_of_appointment_isDisabled"],id:"form_time_of_appointment",placeholder:"请输入预约时间"},domProps:{value:e.form["time_of_appointment"]},on:{input:function(t){t.target.composing||e.$set(e.form,"time_of_appointment",t.target.value)}}}):e.$check_field("get","time_of_appointment")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e(),e.$check_field("set","number_of_appointments")||e.$check_field("add","number_of_appointments")||e.$check_field("get","number_of_appointments")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(7),t("div",{staticClass:"diy_field diy_down"},[e.form["number_of_appointments"]&&e.$check_field("set","number_of_appointments")||!e.form["number_of_appointments"]&&e.$check_field("add","number_of_appointments")?t("select",{directives:[{name:"model",rawName:"v-model",value:e.form["number_of_appointments"],expression:"form['number_of_appointments']"}],attrs:{id:"form_number_of_appointments"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"number_of_appointments",t.target.multiple?i:i[0])}}},e._l(e.list_number_of_appointments,(function(i){return t("option",{domProps:{value:i}},[e._v(" "+e._s(i)+" ")])})),0):e.$check_field("get","number_of_appointments")?t("span",[e._v(e._s(e.form["number_of_appointments"]))]):e._e()])]):e._e(),e.$check_field("set","user_name")||e.$check_field("add","user_name")||e.$check_field("get","user_name")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(8),t("div",{staticClass:"diy_field diy_down"},[e.form["user_name"]&&e.$check_field("set","user_name")||!e.form["user_name"]&&e.$check_field("add","user_name")?t("select",{directives:[{name:"model",rawName:"v-model",value:e.form["user_name"],expression:"form['user_name']"}],attrs:{id:"form_user_name",disabled:e.disabledObj["user_name_isDisabled"]},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"user_name",t.target.multiple?i:i[0])}}},e._l(e.list_user_user_name,(function(i){return t("option",{domProps:{value:i["user_id"]}},[e._v(" "+e._s(i["nickname"]+"-"+i["username"])+" ")])})),0):e.$check_field("get","user_name")?t("span",[e._v(e._s(e.form["user_name"]))]):e._e()])]):e._e(),e.$check_field("set","telephone")||e.$check_field("add","telephone")||e.$check_field("get","telephone")?t("div",{staticClass:"form-item col-12 col-md-6"},[e._m(9),t("div",{staticClass:"diy_field diy_text"},[e.form["telephone"]&&e.$check_field("set","telephone")||!e.form["telephone"]&&e.$check_field("add","telephone")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form["telephone"],expression:"form['telephone']"}],attrs:{type:"text",id:"form_telephone",placeholder:"请输入电话",disabled:e.disabledObj["telephone_isDisabled"]},domProps:{value:e.form["telephone"]},on:{input:function(t){t.target.composing||e.$set(e.form,"telephone",t.target.value)}}}):e.$check_field("get","telephone")?t("span",[e._v(e._s(e.form["${obj.name}"]))]):e._e()])]):e._e()]),t("div",{staticClass:"diy_edit_submit_box row"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"btn_box"},[t("button",{staticClass:"btn_submit",on:{click:function(t){return e.submit()}}},[e._v("提交")])])])])])])])},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 预约编号: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 疫苗编号: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 疫苗名称: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 疫苗分类: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 适合人群: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 可预约地点: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 预约时间: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 预约数量: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 用户姓名: ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"diy_title"},[t("span",[e._v(" 电话: ")])])}],n=i("c6e7"),s={mixins:[n["a"]],components:{},data(){return{url_get_obj:"~/api/appointment_record/get_obj?",url_add:"~/api/appointment_record/add?",url_set:"~/api/appointment_record/set?",oauth:{signIn:!0,user_group:[]},query:{appointment_number:"",vaccine_no:"",vaccine_name:"",vaccine_classification:"",suitable_for_people:"",bookable_location:"",time_of_appointment:"",number_of_appointments:"",user_name:0,telephone:"",appointment_record_id:0},obj:{appointment_number:this.$get_stamp(),vaccine_no:"",vaccine_name:"",vaccine_classification:"",suitable_for_people:"",bookable_location:"",time_of_appointment:(new Date).getTime(),number_of_appointments:"",user_name:0,telephone:"",appointment_record_id:0},form:{appointment_number:this.$get_stamp(),vaccine_no:"",vaccine_name:"",vaccine_classification:"",suitable_for_people:"",bookable_location:"",time_of_appointment:(new Date).getTime(),number_of_appointments:"",user_name:0,telephone:"",appointment_record_id:0},disabledObj:{appointment_number_isDisabled:!1,vaccine_no_isDisabled:!1,vaccine_name_isDisabled:!1,vaccine_classification_isDisabled:!1,suitable_for_people_isDisabled:!1,bookable_location_isDisabled:!1,time_of_appointment_isDisabled:!1,number_of_appointments_isDisabled:!1,user_name_isDisabled:!1,telephone_isDisabled:!1},list_number_of_appointments:["1"],list_user_user_name:[],field:"appointment_record_id"}},methods:{async get_list_user_user_name(){var e=await this.$get("~/api/user/get_list?user_group=普通用户");e.result&&e.result.list?this.list_user_user_name=e.result.list:e.error&&console.error(e.error)},async get_user_session_user_name(){var e=this,t=await this.$get("~/api/user_group/get_obj?name=普通用户");if(t.result&&t.result.obj){var i=t.result.obj.source_table,a=e.$store.state.user.user_id;if(a){var o="~/api/"+i+"/get_obj?";this.$get(o,{user_id:e.$store.state.user.user_id},(function(t){if(t.result&&t.result.obj){var i=[];for(let e in t.result.obj)i.push(e);var o=[];for(let t in e.form)o.push(t);e.form["user_name"]=a,e.disabledObj["user_name_isDisabled"]=!0;for(var n=0;n<i.length;n++)if("examine_state"!==i[n]&&"examine_reply"!==i[n])for(var s=0;s<o.length;s++)if(i[n]===o[s]&&"user_name"!==i[n]){e.form[o[s]]=t.result.obj[i[n]],e.disabledObj[o[s]+"_isDisabled"]=!0;break}}}))}}else t.error&&console.error(t.error)},change_file(e,t){var i=new FormData;i.append("file",e[0]),this.$post("~/api/appointment_record/upload?",i,e=>{e.result?this.form[t]=e.result.url:e.error&&this.$toast(e.error.message)})},get_obj_before(e){var t=$.db.get("form");if(t){var i=[];for(let e in t)i.push(e);var a=[];for(let e in this.form)a.push(e);for(var o=0;o<i.length;o++)if("examine_state"!==i[o]&&"examine_reply"!==i[o])for(var n=0;n<a.length;n++)if(a[n]===i[o]){this.form[a[n]]=t[i[o]],this.obj[a[n]]=t[i[o]],this.disabledObj[a[n]+"_isDisabled"]=!0;break}}return-1===JSON.stringify(this.form["time_of_appointment"]).indexOf("-")&&(this.form["time_of_appointment"]=this.$toTime(parseInt(this.form["time_of_appointment"]),"yyyy-MM-ddThh:mm")),$.db.del("form"),e},get_obj_after(e,t){t&&t(e)}},created(){this.get_user_session_user_name(),this.get_list_user_user_name()}},_=s,r=i("0b56"),c=Object(r["a"])(_,a,o,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0aeb77.23126471.js.map