(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4898aabc"],{"1d46":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"page_user",attrs:{id:"user_info"}},[s("div",{staticClass:"warp"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-3"},[s("div",{staticClass:"card_menu"},[s("list_menu_user",{attrs:{list_info:t.list_info}})],1)]),s("div",{staticClass:"col-12 col-md-9"},[s("div",{staticClass:"card_info pl-2"},[s("div",{staticClass:"div_info"},[s("span",[t._v(" 个人资料 ")]),s("div",{staticClass:"content_msg"},[s("div",{staticClass:"left_msg"},[s("div",{staticClass:"figure_avatar"},[s("span",[t._v("头像：")]),s("b-img",{staticClass:"user_avator",staticStyle:{width:"3rem",height:"3rem"},attrs:{src:t.obj.avatar?t.$fullUrl(t.obj.avatar):"/img/default.png",alt:""}})],1),s("div",{staticClass:"nickname"},[t._m(0),s("div",{style:"display:"+t.display_name+";"},[s("span",{staticStyle:{"font-size":"1.2rem",color:"var(--color_grey)"}},[t._v(" "+t._s(t.obj.nickname)+" ")])]),s("div",{staticClass:"input_nickname",style:"display:"+t.display_input+";"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.nickname,expression:"form.nickname"}],attrs:{type:"text",id:"nickname",focus:t.focus_input},domProps:{value:t.form.nickname},on:{input:function(s){s.target.composing||t.$set(t.form,"nickname",s.target.value)}}}),s("div",{staticClass:"btn_save",on:{click:function(s){return t.save_nickname()}}},[t._v(" 保存 ")])])])])]),s("div",{staticClass:"right_msg"},[s("div",{staticClass:"change_avatar_box"},[t._m(1),s("div",{staticClass:"right_wrap"},[s("b-icon",{attrs:{icon:"arrow-right-square"}})],1),s("input",{attrs:{type:"file",id:"input_file",title:" "},on:{change:function(s){return t.change_avatar(s.target.files)}}})]),s("div",{staticClass:"change_nickname_box",on:{click:function(s){return t.change_nickname()}}},[t._m(2),s("div",{staticClass:"right_wrap"},[s("b-icon",{attrs:{icon:"arrow-right-square"}})],1)])])])])])])])])])},a=[function(){var t=this,s=t._self._c;return s("div",[s("span",[t._v("昵称：")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"change_avatar"},[s("span",[t._v("修改头像")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"change_nickname"},[s("span",[t._v("修改昵称")])])}],n=i("c6e7"),r=i("216f"),l={mixins:[n["a"]],data(){return{url_get_obj:"~/api/user/get_obj?",query:{user_id:this.$store.state.user.user_id},display_input:"none",display_name:"block",form:{},focus_input:!1,list_info:[{title:"个人资料",url:"/user/info",icon:"house-fill",selected:!0},{title:"密码修改",url:"/user/password",icon:"person-fill",selected:!1},{title:"收藏",url:"/user/collect",icon:"heart-fill",selected:!1}],file:null}},methods:{async change_avatar(t){var s=this,i=new FormData;i.append("file",t[0]);var e=await this.$post("~/api/user/upload?",i);if(console.log(e),e.result){var a=e.result.url;this.$post("~/api/user/set?user_id="+s.user.user_id,{avatar:a},t=>{this.user.avatar=a,this.obj.avatar=a})}else this.$toast(e.error.message)},change_nickname(){this.display_input="flex",this.display_name="none",this.focus_input=!0},save_nickname(){var t=this.user.user_id,s=this.form.nickname;this.$post("~/api/user/set?user_id="+t,{nickname:s},t=>{console.log(t),this.focus_input=!1,this.display_input="none",this.display_name="block",this.user.nickname=s,this.obj.nickname=s})},get_obj_before(t){return t.user_id=this.$store.state.user.user_id,t}},components:{list_menu_user:r["a"]}},c=l,o=(i("9619"),i("0b56")),u=Object(o["a"])(c,e,a,!1,null,"79d323d1",null);s["default"]=u.exports},"216f":function(t,s,i){"use strict";var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"list_menu"},t._l(t.list_info,(function(i,e){return s("router-link",{key:e,staticClass:"menu_item",class:{selected:i.selected},attrs:{to:i.url}},[s("span",{staticClass:"left_span"},[t._v(t._s(i.title))]),s("span",{staticClass:"right_span"},[s("b-icon",{attrs:{icon:i.icon}})],1)])})),1)},a=[],n={props:{list_info:{type:Array,default(){return[{title:"个人资料",url:"/user/info",icon:"house-fill",selected:!1},{title:"密码修改",url:"/user/password",icon:"person-fill",selected:!1},{title:"收货地址",url:"/user/address",icon:"map-fill",selected:!1},{title:"收藏",url:"/user/collect",icon:"heart-fill",selected:!1},{title:"订单",url:"/order/list",icon:"file-earmark-minus-fill",selected:!1},{title:"购物车",url:"/cart/list",icon:"cart-fill",selected:!1}]}}},methods:{},components:{}},r=n,l=(i("edc5"),i("0b56")),c=Object(l["a"])(r,e,a,!1,null,"4b7714c6",null);s["a"]=c.exports},"929f":function(t,s,i){},9619:function(t,s,i){"use strict";i("ee32")},edc5:function(t,s,i){"use strict";i("929f")},ee32:function(t,s,i){}}]);
//# sourceMappingURL=chunk-4898aabc.f0636823.js.map