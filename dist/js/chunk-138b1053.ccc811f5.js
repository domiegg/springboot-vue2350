(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-138b1053"],{"34cb":function(t,e,i){"use strict";i("ff4a")},"502c":function(t,e,i){},ac66:function(t,e,i){"use strict";i("502c")},d3a8:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"diy_details page_vaccine_appointment",attrs:{id:"vaccine_appointment_details"}},[e("div",{staticClass:"warp"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"card_vaccine_appointment"},[e("div_vaccine_appointment",{attrs:{obj:t.obj}})],1)])])])])])},a=[],c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"diy_details_box diy_div_vaccine_appointment"},[e("div",{staticClass:"warp"},[e("div",{staticClass:"container"},[e("div",{staticClass:"details_title"},[t._v("详情")]),e("div",{staticClass:"row"},[e("div",{staticClass:"row_top_wrap"},[t.imgList.length?e("div",{staticClass:"row_1"},t._l(t.imgList,(function(i,s){return e("div",{key:i+s,staticClass:"diy_img"},[e("img",{attrs:{src:t.$fullUrl(t.obj[i.name])}})])})),0):t._e(),e("div",{staticClass:"row_2",class:{flex_row2:!t.imgList.length}},t._l(t.itemList,(function(i,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.$check_field("get",i.name),expression:"$check_field('get',item.name)"}],key:i+s,class:{flex_row2_item:!t.imgList.length}},[e("div",{staticClass:"view"},[e("div",{staticClass:"diy_title"},[e("span",[t._v(t._s(i.title)+":")])]),"UID"==i.type?e("div",{staticClass:"diy_field diy_uid",class:{flex_row2_item_text:t.imgList.length}},[e("span",[t._v(" "+t._s(t.get_user_info(i.name,t.obj[i.name]))+" ")])]):"视频"==i.type?e("div",{staticClass:"diy_field diy_video",class:{flex_row2_item_text:t.imgList.length}},[t.obj[i.name]?e("router-link",{attrs:{to:"/media/video?filename="+t.$fullUrl(t.obj[i.name])}},[e("span",[t._v(" 查看视频 ")])]):t._e()],1):"音频"==i.type?e("div",{staticClass:"diy_field diy_music",class:{flex_row2_item_text:t.imgList.length}},[t.obj[i.name]?e("audio",{staticStyle:{"text-align":"left"},attrs:{src:t.$fullUrl(t.obj[i.name]),controls:""}}):t._e()]):"文件"==i.type?e("div",{staticClass:"diy_field diy_music",class:{flex_row2_item_text:t.imgList.length}},[e("a",{staticStyle:{color:"rgb(64, 158, 255)"},attrs:{href:t.$fullUrl(t.obj[i.name]),target:"_blank"}},[t._v("点击下载")])]):"日期"==i.type?e("div",{staticClass:"diy_field diy_date",class:{flex_row2_item_text:t.imgList.length}},[e("span",[t._v(" "+t._s(t.$toTime(t.obj[i.name],"yyyy-MM-dd"))+" ")])]):"时间"==i.type?e("div",{staticClass:"diy_field diy_time",class:{flex_row2_item_text:t.imgList.length}},[e("span",[t._v(" "+t._s(t.$toTime(t.obj[i.name],"hh:mm:ss"))+" ")])]):"日长"==i.type?e("div",{staticClass:"diy_field diy_datetime",class:{flex_row2_item_text:t.imgList.length}},[e("span",[t._v(" "+t._s(t.$toTime(t.obj[i.name],"yyyy-MM-dd hh:mm:ss"))+" ")])]):"电话"==i.type||"手机"==i.type?e("div",{staticClass:"diy_field diy_phone",class:{flex_row2_item_text:t.imgList.length}},[e("span",[t._v(" "+t._s(t.obj[i.name])+" ")])]):"数字"==i.type?e("div",{staticClass:"diy_field diy_number",class:{flex_row2_item_text:t.imgList.length}},[e("span",[t._v(" "+t._s(t.obj[i.name])+" ")])]):"网址"==i.type?e("div",{staticClass:"diy_field diy_url",class:{flex_row2_item_text:t.imgList.length}},[e("div",[e("a",{staticStyle:{color:"rgb(64, 158, 255)"},attrs:{href:t.obj[i.name],target:"_blank"}},[t._v(t._s(t.obj[i.name]))])])]):"多文本"==i.type?e("div",{staticClass:"diy_field diy_desc",class:{flex_row2_item_text:t.imgList.length}},[e("div",[t._v(" "+t._s(t.obj[i.name])+" ")])]):e("div",{staticClass:"diy_field diy_text",class:{flex_row2_item_text:t.imgList.length}},[e("span",[t._v(" "+t._s(t.obj[i.name])+" ")])])])])})),0)]),e("div",{staticClass:"details_btn_wrap"},[t.$check_action("/appointment_record/edit","add")?e("button",{staticClass:"btn btn-primary details_btn",on:{click:function(e){return t.to_form("/appointment_record/edit")}}},[t._v(" 预约 ")]):t._e(),t.$check_action("/vaccine_appointment/details","set")?e("button",{staticClass:"btn btn-primary details_btn",on:{click:function(e){return t.change_collect()}}},[t._v("收藏")]):t._e()]),t._l(t.richList,(function(i,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.$check_field("get",i.name),expression:"$check_field('get',item.name)"}],key:i+s,staticClass:"rich_text"},[e("div",{staticClass:"view"},[e("div",{staticClass:"diy_title"},[e("span",{domProps:{textContent:t._s(i.title)}})]),e("div",{staticClass:"diy_html",domProps:{innerHTML:t._s(t.obj[i.name])}})])])}))],2)])])])},n=[],o=i("6265"),l=i("c6e7"),_={mixins:[o["a"],l["a"]],components:{},props:{obj:{type:Object,default:function(){return{}}}},data(){return{praiseLen:this.obj["praise_len"],imgList:[{title:"图片",name:"picture",type:"图片"}],itemList:[{title:"疫苗编号",name:"vaccine_no",type:"文本"},{title:"疫苗名称",name:"vaccine_name",type:"文本"},{title:"疫苗分类",name:"vaccine_classification",type:"下寻"},{title:"生产厂家",name:"manufacturer",type:"文本"},{title:"适合人群",name:"suitable_for_people",type:"文本"},{title:"可预约时间",name:"bookable_time",type:"文本"},{title:"可预约地点",name:"bookable_location",type:"下寻"},{title:"可预约数量",name:"bookable_quantity",type:"数字"}],richList:[{title:"注意事项",name:"matters_needing_attention",type:"编辑"}]}},methods:{get_user_info(t,e){var i=null,s="";return i&&(s=i.nickname+"-"+i.username),s},change_collect(){var t=this.user.user_id,e={source_table:"vaccine_appointment",source_field:"vaccine_appointment_id",source_id:this.obj["vaccine_appointment_id"],user_id:t};this.state_collect?(this.state_collect=!1,this.$get("~/api/collect/del?",e,t=>{t.result?this.$message.success("取消收藏"):t.error&&(this.$toast(t.error.message),console.error(t.error))})):(this.state_collect=!0,e.img=this.obj.picture,e.title=this.obj.vaccine_name,this.$post("~/api/collect/add?",e,t=>{t.result?this.$message.success("收藏成功"):t.error&&(this.$toast(t.error.message),console.error(t.error))}))},check_collect(){var t=this.$store.state.user.user_id,e=this.obj.vaccine_appointment_id;this.$get("~/api/collect/count?",{user_id:t,source_table:"vaccine_appointment",source_field:"vaccine_appointment_id",source_id:e},t=>{this.state_collect=t.result})}},created(){setTimeout(()=>{this.check_collect()},1e3)},watch:{obj:{deep:!0,handler(){this.praiseLen=this.obj["praise_len"]}}}},r=_,d=(i("34cb"),i("0b56")),m=Object(d["a"])(r,c,n,!1,null,null,null),p=m.exports,u={mixins:[l["a"]],components:{div_vaccine_appointment:p},data(){return{url_get_obj:"~/api/vaccine_appointment/get_obj?",field:"vaccine_appointment_id",obj:{},query:{picture:"",vaccine_no:"",vaccine_name:"",vaccine_classification:"",manufacturer:"",suitable_for_people:"",bookable_time:"",bookable_location:"",bookable_quantity:0,matters_needing_attention:"",vaccine_appointment_id:0},praise:0,state_praise:!1,state_collect:!1}},methods:{add_hits(t){t["hits"]=t["hits"]+1;var e=t["hits"];this.$post("~/api/vaccine_appointment/set?vaccine_appointment_id="+t["vaccine_appointment_id"],{hits:e},t=>{if(t.result){console.log("添加访问量状态：",t.result);var e={source_table:"vaccine_appointment",source_field:"vaccine_appointment_id",source_id:this.obj.vaccine_appointment_id,user_id:this.$store.state.user.user_id};this.$post("~/api/hits/add?",e,t=>{console.log(t)})}else t.error&&console.error(t.error)})},get_obj_after(t){if(t&&t.result&&t.result.obj){console.log(t.result.obj);var e=t.result.obj;this.obj=e,this.add_hits(e),this.get_collect(e)}},get_collect(t){var e=this.user.user_id,i={source_table:"vaccine_appointment",source_field:"vaccine_appointment_id",source_id:t["vaccine_appointment_id"],user_id:e};this.$get("~/api/collect/count?",i,t=>{if(console.log(t),t.result||0===t.result){var e=!!t.result;this.state_collect=e,console.log("收藏状态："+e)}else t.error&&console.error(t.error)})},toShare(t){window.open(t)},change_collect(){var t=this.user.user_id,e={source_table:"vaccine_appointment",source_field:"vaccine_appointment_id",source_id:this.obj["vaccine_appointment_id"],user_id:t};this.state_collect?(this.state_collect=!1,this.$get("~/api/collect/del?",e,t=>{t.result?this.$toast("取消收藏"):t.error&&(this.$toast(t.error.message),console.error(t.error))})):(this.state_collect=!0,e.img=this.obj.picture,e.title=this.obj.vaccine_name,this.$post("~/api/collect/add?",e,t=>{t.result?this.$toast("收藏成功"):t.error&&(this.$toast(t.error.message),console.error(t.error))}))}},mounted(){}},v=u,h=(i("ac66"),Object(d["a"])(v,s,a,!1,null,null,null));e["default"]=h.exports},ff4a:function(t,e,i){}}]);
//# sourceMappingURL=chunk-138b1053.ccc811f5.js.map